看到[网上](https://github.com/chihungyu1116/leetcode-javascript/blob/master/338%20Count%20Bits.js)大多数的解体思路的关键点都是：

`ans[i] = (ans[i] || 0) + ans[i&(i-1)] + 1;`

我个人的理解是这样的：

要尽量提高效率，就尽可能使用之前步骤产生的中间结果。

| i | 对应二进制| 1的个数  |
|---|---|---|
| 0 | 000 | 0 |
| 1 | 001 | 1 |
| 2 | 010 | 1 |
| 3 | 011 | 2 |
| 4 | 100 | 1 |
| 5 | 101 | 2 |
| 6 | 110 | 2 |
| 7 | 111 | 3 |

观察规律，首先找出 `i` 和 `i - 1` 之间相同的位数有多少个 1: `ans[i&(i-1)]`，至于变化的位数，有两种情况：0 -> 1 或者 1 -> 10。对于第一种情况，自然而然地 1 的个数多了一个；对于情况二，由于产生了进位，所以 1 的个数也多了 1 。

所以就得出: `ans[i] = ans[i&(i-1)] + 1`

其实我还不太理解 `(ans[i] || 0)` 这一部分的用处。